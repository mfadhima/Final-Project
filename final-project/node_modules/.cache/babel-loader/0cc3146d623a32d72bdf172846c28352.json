{"ast":null,"code":"var _jsxFileName = \"C:\\\\Project\\\\My-Final-Project\\\\final-project\\\\src\\\\components\\\\pages\\\\Cart.jsx\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Redirect } from 'react-router-dom';\nimport '../styles/Cart.css';\nimport Axios from 'axios';\nimport Checkout from '../Checkout';\nconst URL_API = 'http://localhost:8888/';\n\nclass Cart extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      carts: [],\n      checkouts: null\n    };\n\n    this.getCartData = () => {\n      Axios.get(URL_API + 'carts/getcart', {\n        params: {\n          userId: this.props.userId\n        }\n      }).then(res => {\n        this.setState({\n          carts: res.data\n        }); // console.log(this.state.carts)\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.onDeleteClick = id => {\n      Axios.delete(URL_API + \"carts/deletecart/\".concat(id)).then(res => {\n        this.getCartData();\n        console.log(res.data);\n      });\n    };\n\n    this.onCheckoutClick = () => {\n      this.setState({\n        checkouts: this.state.carts\n      });\n      console.log(this.state.checkouts);\n    };\n\n    this.renderCart = () => {\n      return this.state.carts.map(val => {\n        let image = URL_API + val.productImage;\n        return React.createElement(\"tr\", {\n          key: val.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 55\n          },\n          __self: this\n        }, React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 56\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          src: image,\n          alt: \"\",\n          width: \"200px\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 57\n          },\n          __self: this\n        })), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 59\n          },\n          __self: this\n        }, val.productName), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 60\n          },\n          __self: this\n        }, val.productPrice), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 61\n          },\n          __self: this\n        }, val.quantity), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 62\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          onClick: () => {\n            this.onDeleteClick(val.id);\n          },\n          className: \"button-ku\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 62\n          },\n          __self: this\n        }, \"Delete\")));\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.getCartData();\n  }\n\n  render() {\n    if (this.props.role === 'user') {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        className: \"mt-5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, \"Shopping Cart\"), React.createElement(\"table\", {\n        className: \"table\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, \"Image\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, \"Product\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, \"Price\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, \"Quantity\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }))), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, this.renderCart())), React.createElement(\"div\", {\n        className: \"text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: this.onCheckoutClick,\n        className: \"button-ku-checkout btn-block\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, \"Checkout\")), React.createElement(Checkout, {\n        carts: this.state.checkouts,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      })));\n    } else {\n      return React.createElement(Redirect, {\n        to: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      });\n    }\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    userId: state.auth.id,\n    role: state.auth.role\n  };\n};\n\nexport default connect(mapStateToProps)(Cart);","map":{"version":3,"sources":["C:\\Project\\My-Final-Project\\final-project\\src\\components\\pages\\Cart.jsx"],"names":["React","Component","connect","Redirect","Axios","Checkout","URL_API","Cart","state","carts","checkouts","getCartData","get","params","userId","props","then","res","setState","data","catch","err","console","log","onDeleteClick","id","delete","onCheckoutClick","renderCart","map","val","image","productImage","productName","productPrice","quantity","componentDidMount","render","role","mapStateToProps","auth"],"mappings":"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","sourcesContent":["import React, {Component} from 'react'\r\nimport {connect} from 'react-redux'\r\nimport {Redirect} from 'react-router-dom'\r\nimport '../styles/Cart.css'\r\nimport Axios from 'axios'\r\n\r\nimport Checkout from '../Checkout'\r\n\r\nconst URL_API = 'http://localhost:8888/'\r\n\r\nclass Cart extends Component {\r\n    state = {\r\n        carts: [],\r\n        checkouts: null\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.getCartData()\r\n    }\r\n\r\n    getCartData = () => {\r\n        Axios.get(\r\n            URL_API + 'carts/getcart',\r\n            {\r\n                params: {\r\n                    userId: this.props.userId\r\n                }\r\n            }\r\n        ).then((res) => {\r\n            this.setState({carts: res.data})\r\n            // console.log(this.state.carts)\r\n        }).catch((err) => {\r\n            console.log(err)\r\n        })\r\n    }\r\n\r\n    onDeleteClick = (id) => {\r\n        Axios.delete(\r\n            URL_API + `carts/deletecart/${id}`\r\n        ).then((res) => {\r\n            this.getCartData()\r\n            console.log(res.data)\r\n        })\r\n    }\r\n\r\n    onCheckoutClick = () => {\r\n        this.setState({checkouts: this.state.carts})\r\n        console.log(this.state.checkouts)\r\n    }\r\n\r\n    renderCart = () => {\r\n        return this.state.carts.map((val) => {\r\n            let image = URL_API + val.productImage\r\n            return (\r\n                <tr key={val.id}>\r\n                    <td>\r\n                        <img src={image} alt=\"\" width=\"200px\"/>\r\n                    </td>\r\n                    <td>{val.productName}</td>\r\n                    <td>{val.productPrice}</td>\r\n                    <td>{val.quantity}</td>\r\n                    <td><button onClick={() => {this.onDeleteClick(val.id)}} className=\"button-ku\">Delete</button></td>\r\n                </tr>\r\n            )\r\n        })\r\n    }\r\n\r\n    render() {\r\n        if(this.props.role === 'user') {\r\n            return(\r\n                <div>\r\n                    <div className=\"container\">\r\n                        <h4 className=\"mt-5\">Shopping Cart</h4>\r\n                        <table className=\"table\">\r\n                            <thead>\r\n                                <tr>\r\n                                    <th>Image</th>\r\n                                    <th>Product</th>\r\n                                    <th>Price</th>\r\n                                    <th>Quantity</th>\r\n                                    <th></th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                {this.renderCart()}\r\n                            </tbody>\r\n                        </table>\r\n\r\n                        <div className=\"text-center\">\r\n                            <button onClick={this.onCheckoutClick} className=\"button-ku-checkout btn-block\">Checkout</button>\r\n                        </div>\r\n\r\n                        <Checkout carts={this.state.checkouts} />\r\n                    </div>\r\n                </div>\r\n            )\r\n        } else {\r\n            return <Redirect to=\"/\" />\r\n        }\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        userId: state.auth.id,\r\n        role: state.auth.role\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Cart)"]},"metadata":{},"sourceType":"module"}