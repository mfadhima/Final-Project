{"ast":null,"code":"var _jsxFileName = \"C:\\\\Project\\\\My-Final-Project\\\\final-project\\\\src\\\\components\\\\pages\\\\ManageProducts.jsx\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Redirect } from 'react-router-dom';\nimport Axios from 'axios';\nimport '../styles/ManageProducts.css';\nconst URL_API = 'http://localhost:8888/';\n\nclass ManageProducts extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      productName: '',\n      productDesc: '',\n      productPrice: 0,\n      productImage: null,\n      productData: [],\n      message: '',\n      selectedId: 0,\n      selectedName: '',\n      selectedDesc: '',\n      selectedPrice: 0,\n      selectedImage: null\n    };\n\n    this.getProductData = () => {\n      Axios.get(URL_API + 'products/productdata').then(res => {\n        // console.log(res.data)\n        this.setState({\n          productData: res.data,\n          selectedId: 0\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.onAddClick = () => {\n      if (!this.state.productName || !this.state.productDesc || !this.state.productPrice || !this.state.productImage) {\n        this.setState({\n          message: 'Please fill all forms..'\n        });\n      } else {\n        let fd = new FormData();\n        fd.append('products', this.state.productImage, this.state.productImage.name);\n        fd.append('name', this.state.productName);\n        fd.append('desc', this.state.productDesc);\n        fd.append('price', this.state.productPrice);\n        Axios.post(URL_API + 'products/addproduct', fd).then(res => {\n          // console.log(res)\n          this.setState({\n            message: res.data\n          });\n          this.getProductData();\n        }).catch(err => {\n          console.log(err);\n        });\n      }\n    };\n\n    this.onEditClick = product => {\n      this.setState({\n        selectedId: product.id,\n        selectedName: product.name,\n        selectedDesc: product.desc,\n        selectedPrice: product.price,\n        selectedImage: product.image\n      });\n    };\n\n    this.onSaveClick = productId => {\n      let fd = new FormData();\n      fd.append('products', this.state.selectedImage, this.state.selectedImage.name);\n      fd.append('name', this.state.selectedName);\n      fd.append('desc', this.state.selectedDesc);\n      fd.append('price', this.state.selectedPrice);\n      Axios.put(URL_API + \"products/editproduct/\".concat(productId), fd).then(res => {\n        console.log(res.data);\n        this.getProductData();\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.onDeleteClick = id => {\n      // console.log(id)\n      Axios.delete(URL_API + \"products/deleteproduct/\".concat(id)).then(res => {\n        this.getProductData();\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.notification = () => {\n      if (!this.state.message) {\n        return null;\n      } else {\n        if (this.state.message === 'Please fill all forms..') {\n          return React.createElement(\"div\", {\n            className: \"alert-ku alert-danger mb-3 text-center\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 109\n            },\n            __self: this\n          }, this.state.message);\n        } else {\n          return React.createElement(\"div\", {\n            className: \"alert-ku alert-success mb-3 text-center\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 113\n            },\n            __self: this\n          }, this.state.message);\n        }\n      }\n    };\n\n    this.renderProduct = () => {\n      return this.state.productData.map(value => {\n        if (this.state.selectedId !== value.id) {\n          return React.createElement(\"tr\", {\n            key: value.id,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 123\n            },\n            __self: this\n          }, React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 124\n            },\n            __self: this\n          }, value.name), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 125\n            },\n            __self: this\n          }, value.desc), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 126\n            },\n            __self: this\n          }, \"Rp \", parseInt(value.price).toLocaleString('IN')), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 127\n            },\n            __self: this\n          }, React.createElement(\"img\", {\n            src: URL_API + value.image,\n            alt: \"product\",\n            width: \"100px\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 127\n            },\n            __self: this\n          })), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 128\n            },\n            __self: this\n          }, React.createElement(\"button\", {\n            onClick: () => {\n              this.onEditClick(value);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 129\n            },\n            __self: this\n          }, \"Edit\"), React.createElement(\"button\", {\n            onClick: () => {\n              this.onDeleteClick(value.id);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 130\n            },\n            __self: this\n          }, \"Delete\")));\n        } else {\n          return React.createElement(\"tr\", {\n            key: value.id,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 136\n            },\n            __self: this\n          }, React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 137\n            },\n            __self: this\n          }, React.createElement(\"input\", {\n            type: \"text\",\n            className: \"form-control\",\n            onChange: e => {\n              this.setState({\n                selectedName: e.target.value\n              });\n            },\n            value: this.state.selectedName,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 137\n            },\n            __self: this\n          })), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 138\n            },\n            __self: this\n          }, React.createElement(\"input\", {\n            type: \"text\",\n            className: \"form-control\",\n            onChange: e => {\n              this.setState({\n                selectedDesc: e.target.value\n              });\n            },\n            value: this.state.selectedDesc,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 138\n            },\n            __self: this\n          })), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 139\n            },\n            __self: this\n          }, React.createElement(\"input\", {\n            type: \"text\",\n            className: \"form-control\",\n            onChange: e => {\n              this.setState({\n                selectedPrice: e.target.value\n              });\n            },\n            value: this.state.selectedPrice,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 139\n            },\n            __self: this\n          })), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 140\n            },\n            __self: this\n          }, React.createElement(\"input\", {\n            type: \"file\",\n            accept: \"image/*\",\n            ref: \"uploadImage\",\n            hidden: true,\n            onChange: e => {\n              this.setState({\n                selectedImage: e.target.files[0]\n              });\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 141\n            },\n            __self: this\n          }), React.createElement(\"input\", {\n            type: \"button\",\n            value: \"Choose an image\",\n            className: \"button-ku\",\n            onClick: () => {\n              this.refs.uploadImage.click();\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 148\n            },\n            __self: this\n          })), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 155\n            },\n            __self: this\n          }, React.createElement(\"button\", {\n            onClick: () => {\n              this.onSaveClick(value.id);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 156\n            },\n            __self: this\n          }, \"Save\"), React.createElement(\"button\", {\n            onClick: () => {\n              this.setState({\n                selectedId: 0\n              });\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 157\n            },\n            __self: this\n          }, \"Cancel\")));\n        }\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.getProductData();\n  }\n\n  render() {\n    if (this.props.role === 'administrator') {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, React.createElement(\"h5\", {\n        className: \"mt-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, \"Add new Product\"), React.createElement(\"table\", {\n        className: \"table\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        required: true,\n        type: \"text\",\n        className: \"form-control\",\n        onChange: e => {\n          this.setState({\n            productName: e.target.value\n          });\n        },\n        placeholder: \"Product Name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      })), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        required: true,\n        type: \"text\",\n        className: \"form-control\",\n        onChange: e => {\n          this.setState({\n            productDesc: e.target.value\n          });\n        },\n        placeholder: \"Description\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      })), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        required: true,\n        type: \"text\",\n        className: \"form-control\",\n        onChange: e => {\n          this.setState({\n            productPrice: e.target.value\n          });\n        },\n        placeholder: \"Price\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      })), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"file\",\n        accept: \"image/*\",\n        ref: \"uploadImage\",\n        hidden: true,\n        onChange: e => {\n          this.setState({\n            productImage: e.target.files[0]\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"button\",\n        value: \"Choose an image\",\n        className: \"button-ku\",\n        onClick: () => {\n          this.refs.uploadImage.click();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      })), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"button-ku\",\n        onClick: this.onAddClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, \"Add Product\"))))), this.notification(), React.createElement(\"h5\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }, \"Our Products\"), React.createElement(\"table\", {\n        className: \"table\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        className: \"col-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }, \"Product Name\"), React.createElement(\"th\", {\n        className: \"col-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }, \"Description\"), React.createElement(\"th\", {\n        className: \"col-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }, \"Price\"), React.createElement(\"th\", {\n        className: \"col-1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }, \"Image\"), React.createElement(\"th\", {\n        className: \"col-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }, \"Action\"))), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }, this.renderProduct()))));\n    } else {\n      return React.createElement(Redirect, {\n        to: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      });\n    }\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    role: state.auth.role\n  };\n};\n\nexport default connect(mapStateToProps, {})(ManageProducts);","map":{"version":3,"sources":["C:\\Project\\My-Final-Project\\final-project\\src\\components\\pages\\ManageProducts.jsx"],"names":["React","Component","connect","Redirect","Axios","URL_API","ManageProducts","state","productName","productDesc","productPrice","productImage","productData","message","selectedId","selectedName","selectedDesc","selectedPrice","selectedImage","getProductData","get","then","res","setState","data","catch","err","console","log","onAddClick","fd","FormData","append","name","post","onEditClick","product","id","desc","price","image","onSaveClick","productId","put","onDeleteClick","delete","notification","renderProduct","map","value","parseInt","toLocaleString","e","target","files","refs","uploadImage","click","componentDidMount","render","props","role","mapStateToProps","auth"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,SAAQC,OAAR,QAAsB,aAAtB;AACA,SAAQC,QAAR,QAAuB,kBAAvB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,OAAO,8BAAP;AAEA,MAAMC,OAAO,GAAG,wBAAhB;;AAEA,MAAMC,cAAN,SAA6BL,SAA7B,CAAuC;AAAA;AAAA;AAAA,SACnCM,KADmC,GAC3B;AACJC,MAAAA,WAAW,EAAE,EADT;AAEJC,MAAAA,WAAW,EAAE,EAFT;AAGJC,MAAAA,YAAY,EAAE,CAHV;AAIJC,MAAAA,YAAY,EAAE,IAJV;AAKJC,MAAAA,WAAW,EAAE,EALT;AAMJC,MAAAA,OAAO,EAAE,EANL;AAOJC,MAAAA,UAAU,EAAE,CAPR;AAQJC,MAAAA,YAAY,EAAE,EARV;AASJC,MAAAA,YAAY,EAAE,EATV;AAUJC,MAAAA,aAAa,EAAE,CAVX;AAWJC,MAAAA,aAAa,EAAE;AAXX,KAD2B;;AAAA,SAmBnCC,cAnBmC,GAmBlB,MAAM;AACnBf,MAAAA,KAAK,CAACgB,GAAN,CACIf,OAAO,GAAG,sBADd,EAEEgB,IAFF,CAEQC,GAAD,IAAS;AACZ;AACA,aAAKC,QAAL,CAAc;AACVX,UAAAA,WAAW,EAAEU,GAAG,CAACE,IADP;AAEVV,UAAAA,UAAU,EAAE;AAFF,SAAd;AAIH,OARD,EAQGW,KARH,CAQUC,GAAD,IAAS;AACdC,QAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACH,OAVD;AAWH,KA/BkC;;AAAA,SAiCnCG,UAjCmC,GAiCtB,MAAM;AACf,UAAG,CAAC,KAAKtB,KAAL,CAAWC,WAAZ,IAA2B,CAAC,KAAKD,KAAL,CAAWE,WAAvC,IAAsD,CAAC,KAAKF,KAAL,CAAWG,YAAlE,IAAkF,CAAC,KAAKH,KAAL,CAAWI,YAAjG,EAA+G;AAC3G,aAAKY,QAAL,CAAc;AAACV,UAAAA,OAAO,EAAE;AAAV,SAAd;AACH,OAFD,MAEO;AACH,YAAIiB,EAAE,GAAG,IAAIC,QAAJ,EAAT;AACAD,QAAAA,EAAE,CAACE,MAAH,CAAU,UAAV,EAAsB,KAAKzB,KAAL,CAAWI,YAAjC,EAA+C,KAAKJ,KAAL,CAAWI,YAAX,CAAwBsB,IAAvE;AACAH,QAAAA,EAAE,CAACE,MAAH,CAAU,MAAV,EAAkB,KAAKzB,KAAL,CAAWC,WAA7B;AACAsB,QAAAA,EAAE,CAACE,MAAH,CAAU,MAAV,EAAkB,KAAKzB,KAAL,CAAWE,WAA7B;AACAqB,QAAAA,EAAE,CAACE,MAAH,CAAU,OAAV,EAAmB,KAAKzB,KAAL,CAAWG,YAA9B;AACAN,QAAAA,KAAK,CAAC8B,IAAN,CACI7B,OAAO,GAAG,qBADd,EACqCyB,EADrC,EAEET,IAFF,CAEQC,GAAD,IAAS;AACZ;AACA,eAAKC,QAAL,CAAc;AACVV,YAAAA,OAAO,EAAES,GAAG,CAACE;AADH,WAAd;AAGA,eAAKL,cAAL;AACH,SARD,EAQGM,KARH,CAQUC,GAAD,IAAS;AACdC,UAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACH,SAVD;AAWH;AACJ,KAtDkC;;AAAA,SAwDnCS,WAxDmC,GAwDpBC,OAAD,IAAa;AACvB,WAAKb,QAAL,CAAc;AACVT,QAAAA,UAAU,EAAEsB,OAAO,CAACC,EADV;AAEVtB,QAAAA,YAAY,EAAEqB,OAAO,CAACH,IAFZ;AAGVjB,QAAAA,YAAY,EAAEoB,OAAO,CAACE,IAHZ;AAIVrB,QAAAA,aAAa,EAAEmB,OAAO,CAACG,KAJb;AAKVrB,QAAAA,aAAa,EAAEkB,OAAO,CAACI;AALb,OAAd;AAOH,KAhEkC;;AAAA,SAkEnCC,WAlEmC,GAkEpBC,SAAD,IAAe;AACzB,UAAIZ,EAAE,GAAG,IAAIC,QAAJ,EAAT;AACAD,MAAAA,EAAE,CAACE,MAAH,CAAU,UAAV,EAAsB,KAAKzB,KAAL,CAAWW,aAAjC,EAAgD,KAAKX,KAAL,CAAWW,aAAX,CAAyBe,IAAzE;AACAH,MAAAA,EAAE,CAACE,MAAH,CAAU,MAAV,EAAkB,KAAKzB,KAAL,CAAWQ,YAA7B;AACAe,MAAAA,EAAE,CAACE,MAAH,CAAU,MAAV,EAAkB,KAAKzB,KAAL,CAAWS,YAA7B;AACAc,MAAAA,EAAE,CAACE,MAAH,CAAU,OAAV,EAAmB,KAAKzB,KAAL,CAAWU,aAA9B;AACAb,MAAAA,KAAK,CAACuC,GAAN,CACItC,OAAO,kCAA2BqC,SAA3B,CADX,EACmDZ,EADnD,EAEET,IAFF,CAEQC,GAAD,IAAS;AACZK,QAAAA,OAAO,CAACC,GAAR,CAAYN,GAAG,CAACE,IAAhB;AACA,aAAKL,cAAL;AACH,OALD,EAKGM,KALH,CAKUC,GAAD,IAAS;AACdC,QAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACH,OAPD;AAQH,KAhFkC;;AAAA,SAkFnCkB,aAlFmC,GAkFlBP,EAAD,IAAQ;AACpB;AACAjC,MAAAA,KAAK,CAACyC,MAAN,CACIxC,OAAO,oCAA6BgC,EAA7B,CADX,EAEEhB,IAFF,CAEQC,GAAD,IAAS;AACZ,aAAKH,cAAL;AACH,OAJD,EAIGM,KAJH,CAIUC,GAAD,IAAS;AACdC,QAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACH,OAND;AAOH,KA3FkC;;AAAA,SA6FnCoB,YA7FmC,GA6FpB,MAAM;AACjB,UAAG,CAAC,KAAKvC,KAAL,CAAWM,OAAf,EAAwB;AACpB,eAAO,IAAP;AACH,OAFD,MAEO;AACH,YAAG,KAAKN,KAAL,CAAWM,OAAX,KAAuB,yBAA1B,EAAqD;AACjD,iBACI;AAAK,YAAA,SAAS,EAAC,wCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAyD,KAAKN,KAAL,CAAWM,OAApE,CADJ;AAGH,SAJD,MAIO;AACH,iBACI;AAAK,YAAA,SAAS,EAAC,yCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAA0D,KAAKN,KAAL,CAAWM,OAArE,CADJ;AAGH;AACJ;AACJ,KA3GkC;;AAAA,SA6GnCkC,aA7GmC,GA6GnB,MAAM;AAClB,aAAO,KAAKxC,KAAL,CAAWK,WAAX,CAAuBoC,GAAvB,CAA4BC,KAAD,IAAW;AACzC,YAAG,KAAK1C,KAAL,CAAWO,UAAX,KAA0BmC,KAAK,CAACZ,EAAnC,EAAuC;AACnC,iBACI;AAAI,YAAA,GAAG,EAAEY,KAAK,CAACZ,EAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAKY,KAAK,CAAChB,IAAX,CADJ,EAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAKgB,KAAK,CAACX,IAAX,CAFJ,EAGI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAQY,QAAQ,CAACD,KAAK,CAACV,KAAP,CAAR,CAAsBY,cAAtB,CAAqC,IAArC,CAAR,CAHJ,EAII;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAI;AAAK,YAAA,GAAG,EAAE9C,OAAO,GAAG4C,KAAK,CAACT,KAA1B;AAAiC,YAAA,GAAG,EAAC,SAArC;AAA+C,YAAA,KAAK,EAAC,OAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAJ,CAJJ,EAKI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACI;AAAQ,YAAA,OAAO,EAAE,MAAI;AAAC,mBAAKL,WAAL,CAAiBc,KAAjB;AAAwB,aAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,EAEI;AAAQ,YAAA,OAAO,EAAE,MAAI;AAAC,mBAAKL,aAAL,CAAmBK,KAAK,CAACZ,EAAzB;AAA6B,aAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAFJ,CALJ,CADJ;AAYH,SAbD,MAaO;AACH,iBACI;AAAI,YAAA,GAAG,EAAEY,KAAK,CAACZ,EAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAI;AAAO,YAAA,IAAI,EAAC,MAAZ;AAAmB,YAAA,SAAS,EAAC,cAA7B;AAA4C,YAAA,QAAQ,EAAGe,CAAD,IAAO;AAAC,mBAAK7B,QAAL,CAAc;AAACR,gBAAAA,YAAY,EAAEqC,CAAC,CAACC,MAAF,CAASJ;AAAxB,eAAd;AAA8C,aAA5G;AAA8G,YAAA,KAAK,EAAE,KAAK1C,KAAL,CAAWQ,YAAhI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAJ,CADJ,EAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAI;AAAO,YAAA,IAAI,EAAC,MAAZ;AAAmB,YAAA,SAAS,EAAC,cAA7B;AAA4C,YAAA,QAAQ,EAAGqC,CAAD,IAAO;AAAC,mBAAK7B,QAAL,CAAc;AAACP,gBAAAA,YAAY,EAAEoC,CAAC,CAACC,MAAF,CAASJ;AAAxB,eAAd;AAA8C,aAA5G;AAA8G,YAAA,KAAK,EAAE,KAAK1C,KAAL,CAAWS,YAAhI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAJ,CAFJ,EAGI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAI;AAAO,YAAA,IAAI,EAAC,MAAZ;AAAmB,YAAA,SAAS,EAAC,cAA7B;AAA4C,YAAA,QAAQ,EAAGoC,CAAD,IAAO;AAAC,mBAAK7B,QAAL,CAAc;AAACN,gBAAAA,aAAa,EAAEmC,CAAC,CAACC,MAAF,CAASJ;AAAzB,eAAd;AAA+C,aAA7G;AAA+G,YAAA,KAAK,EAAE,KAAK1C,KAAL,CAAWU,aAAjI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAJ,CAHJ,EAII;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACI;AACI,YAAA,IAAI,EAAC,MADT;AAEI,YAAA,MAAM,EAAC,SAFX;AAGI,YAAA,GAAG,EAAC,aAHR;AAII,YAAA,MAAM,MAJV;AAKI,YAAA,QAAQ,EAAGmC,CAAD,IAAO;AAAC,mBAAK7B,QAAL,CAAc;AAACL,gBAAAA,aAAa,EAAEkC,CAAC,CAACC,MAAF,CAASC,KAAT,CAAe,CAAf;AAAhB,eAAd;AAAkD,aALxE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ,EAQI;AACI,YAAA,IAAI,EAAC,QADT;AAEI,YAAA,KAAK,EAAC,iBAFV;AAGI,YAAA,SAAS,EAAC,WAHd;AAII,YAAA,OAAO,EAAE,MAAM;AAAC,mBAAKC,IAAL,CAAUC,WAAV,CAAsBC,KAAtB;AAA8B,aAJlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YARJ,CAJJ,EAmBI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACI;AAAQ,YAAA,OAAO,EAAE,MAAM;AAAC,mBAAKhB,WAAL,CAAiBQ,KAAK,CAACZ,EAAvB;AAA2B,aAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,EAEI;AAAQ,YAAA,OAAO,EAAE,MAAM;AAAC,mBAAKd,QAAL,CAAc;AAACT,gBAAAA,UAAU,EAAE;AAAb,eAAd;AAA+B,aAAvD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAFJ,CAnBJ,CADJ;AA0BH;AACJ,OA1CM,CAAP;AA2CH,KAzJkC;AAAA;;AAenC4C,EAAAA,iBAAiB,GAAG;AAChB,SAAKvC,cAAL;AACH;;AA0IDwC,EAAAA,MAAM,GAAG;AACL,QAAG,KAAKC,KAAL,CAAWC,IAAX,KAAoB,eAAvB,EAAwC;AACpC,aACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAK,QAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAI,QAAA,SAAS,EAAC,MAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BADJ,EAEI;AAAO,QAAA,SAAS,EAAC,OAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAI;AAAO,QAAA,QAAQ,MAAf;AAAgB,QAAA,IAAI,EAAC,MAArB;AAA4B,QAAA,SAAS,EAAC,cAAtC;AAAqD,QAAA,QAAQ,EAAGT,CAAD,IAAO;AAAC,eAAK7B,QAAL,CAAc;AAACf,YAAAA,WAAW,EAAE4C,CAAC,CAACC,MAAF,CAASJ;AAAvB,WAAd;AAA6C,SAApH;AAAsH,QAAA,WAAW,EAAC,cAAlI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAJ,CADJ,EAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAI;AAAO,QAAA,QAAQ,MAAf;AAAgB,QAAA,IAAI,EAAC,MAArB;AAA4B,QAAA,SAAS,EAAC,cAAtC;AAAqD,QAAA,QAAQ,EAAGG,CAAD,IAAO;AAAC,eAAK7B,QAAL,CAAc;AAACd,YAAAA,WAAW,EAAE2C,CAAC,CAACC,MAAF,CAASJ;AAAvB,WAAd;AAA6C,SAApH;AAAsH,QAAA,WAAW,EAAC,aAAlI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAJ,CAFJ,EAGI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAI;AAAO,QAAA,QAAQ,MAAf;AAAgB,QAAA,IAAI,EAAC,MAArB;AAA4B,QAAA,SAAS,EAAC,cAAtC;AAAqD,QAAA,QAAQ,EAAGG,CAAD,IAAO;AAAC,eAAK7B,QAAL,CAAc;AAACb,YAAAA,YAAY,EAAE0C,CAAC,CAACC,MAAF,CAASJ;AAAxB,WAAd;AAA8C,SAArH;AAAuH,QAAA,WAAW,EAAC,OAAnI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAJ,CAHJ,EAII;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AACI,QAAA,IAAI,EAAC,MADT;AAEI,QAAA,MAAM,EAAC,SAFX;AAGI,QAAA,GAAG,EAAC,aAHR;AAII,QAAA,MAAM,MAJV;AAKI,QAAA,QAAQ,EAAGG,CAAD,IAAO;AAAC,eAAK7B,QAAL,CAAc;AAACZ,YAAAA,YAAY,EAAEyC,CAAC,CAACC,MAAF,CAASC,KAAT,CAAe,CAAf;AAAf,WAAd;AAAiD,SALvE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,EAQI;AACI,QAAA,IAAI,EAAC,QADT;AAEI,QAAA,KAAK,EAAC,iBAFV;AAGI,QAAA,SAAS,EAAC,WAHd;AAII,QAAA,OAAO,EAAE,MAAM;AAAC,eAAKC,IAAL,CAAUC,WAAV,CAAsBC,KAAtB;AAA8B,SAJlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QARJ,CAJJ,EAmBI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAI;AAAQ,QAAA,SAAS,EAAC,WAAlB;AAA8B,QAAA,OAAO,EAAE,KAAK5B,UAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAAJ,CAnBJ,CADJ,CADJ,CAFJ,EA2BK,KAAKiB,YAAL,EA3BL,EA6BI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBA7BJ,EA8BI;AAAO,QAAA,SAAS,EAAC,OAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAI,QAAA,SAAS,EAAC,OAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADJ,EAEI;AAAI,QAAA,SAAS,EAAC,OAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAFJ,EAGI;AAAI,QAAA,SAAS,EAAC,OAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAHJ,EAII;AAAI,QAAA,SAAS,EAAC,OAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAJJ,EAKI;AAAI,QAAA,SAAS,EAAC,OAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBALJ,CADJ,CADJ,EAUI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACK,KAAKC,aAAL,EADL,CAVJ,CA9BJ,CADJ,CADJ;AAkDH,KAnDD,MAmDO;AACH,aAAO,oBAAC,QAAD;AAAU,QAAA,EAAE,EAAC,GAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAP;AACH;AACJ;;AAlNkC;;AAqNvC,MAAMe,eAAe,GAAIvD,KAAD,IAAW;AAC/B,SAAO;AACHsD,IAAAA,IAAI,EAAEtD,KAAK,CAACwD,IAAN,CAAWF;AADd,GAAP;AAGH,CAJD;;AAMA,eAAe3D,OAAO,CAAC4D,eAAD,EAAkB,EAAlB,CAAP,CAA6BxD,cAA7B,CAAf","sourcesContent":["import React, {Component} from 'react'\r\nimport {connect} from 'react-redux'\r\nimport {Redirect} from 'react-router-dom'\r\nimport Axios from 'axios'\r\n\r\nimport '../styles/ManageProducts.css'\r\n\r\nconst URL_API = 'http://localhost:8888/'\r\n\r\nclass ManageProducts extends Component {\r\n    state = {\r\n        productName: '',\r\n        productDesc: '',\r\n        productPrice: 0,\r\n        productImage: null,\r\n        productData: [],\r\n        message: '',\r\n        selectedId: 0,\r\n        selectedName: '',\r\n        selectedDesc: '',\r\n        selectedPrice: 0,\r\n        selectedImage: null\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.getProductData()\r\n    }\r\n\r\n    getProductData = () => {\r\n        Axios.get(\r\n            URL_API + 'products/productdata'\r\n        ).then((res) => {\r\n            // console.log(res.data)\r\n            this.setState({\r\n                productData: res.data,\r\n                selectedId: 0\r\n            })\r\n        }).catch((err) => {\r\n            console.log(err)\r\n        })\r\n    }\r\n\r\n    onAddClick = () => {\r\n        if(!this.state.productName || !this.state.productDesc || !this.state.productPrice || !this.state.productImage) {\r\n            this.setState({message: 'Please fill all forms..'})\r\n        } else {\r\n            let fd = new FormData()\r\n            fd.append('products', this.state.productImage, this.state.productImage.name)\r\n            fd.append('name', this.state.productName)\r\n            fd.append('desc', this.state.productDesc)\r\n            fd.append('price', this.state.productPrice)\r\n            Axios.post(\r\n                URL_API + 'products/addproduct', fd\r\n            ).then((res) => {\r\n                // console.log(res)\r\n                this.setState({\r\n                    message: res.data\r\n                })\r\n                this.getProductData()\r\n            }).catch((err) => {\r\n                console.log(err)\r\n            })\r\n        }\r\n    }\r\n    \r\n    onEditClick = (product) => {\r\n        this.setState({\r\n            selectedId: product.id,\r\n            selectedName: product.name,\r\n            selectedDesc: product.desc,\r\n            selectedPrice: product.price,\r\n            selectedImage: product.image\r\n        })\r\n    }\r\n\r\n    onSaveClick = (productId) => {\r\n        let fd = new FormData()\r\n        fd.append('products', this.state.selectedImage, this.state.selectedImage.name)\r\n        fd.append('name', this.state.selectedName)\r\n        fd.append('desc', this.state.selectedDesc)\r\n        fd.append('price', this.state.selectedPrice)\r\n        Axios.put(\r\n            URL_API + `products/editproduct/${productId}`, fd\r\n        ).then((res) => {\r\n            console.log(res.data)\r\n            this.getProductData()\r\n        }).catch((err) => {\r\n            console.log(err)\r\n        })\r\n    }\r\n\r\n    onDeleteClick = (id) => {\r\n        // console.log(id)\r\n        Axios.delete(\r\n            URL_API + `products/deleteproduct/${id}`\r\n        ).then((res) => {\r\n            this.getProductData()\r\n        }).catch((err) => {\r\n            console.log(err)\r\n        })\r\n    }\r\n\r\n    notification = () => {\r\n        if(!this.state.message) {\r\n            return null\r\n        } else {\r\n            if(this.state.message === 'Please fill all forms..') {\r\n                return(\r\n                    <div className=\"alert-ku alert-danger mb-3 text-center\">{this.state.message}</div>\r\n                )\r\n            } else {\r\n                return(\r\n                    <div className=\"alert-ku alert-success mb-3 text-center\">{this.state.message}</div>\r\n                )\r\n            }\r\n        }\r\n    }\r\n\r\n    renderProduct = () => {\r\n        return this.state.productData.map((value) => {\r\n            if(this.state.selectedId !== value.id) {\r\n                return(\r\n                    <tr key={value.id}>\r\n                        <td>{value.name}</td>\r\n                        <td>{value.desc}</td>\r\n                        <td>Rp {parseInt(value.price).toLocaleString('IN')}</td>\r\n                        <td><img src={URL_API + value.image} alt=\"product\" width=\"100px\"/></td>\r\n                        <td>\r\n                            <button onClick={()=>{this.onEditClick(value)}}>Edit</button>\r\n                            <button onClick={()=>{this.onDeleteClick(value.id)}}>Delete</button>\r\n                        </td>\r\n                    </tr>\r\n                )\r\n            } else {\r\n                return(\r\n                    <tr key={value.id}>\r\n                        <td><input type=\"text\" className=\"form-control\" onChange={(e) => {this.setState({selectedName: e.target.value})}} value={this.state.selectedName}/></td>\r\n                        <td><input type=\"text\" className=\"form-control\" onChange={(e) => {this.setState({selectedDesc: e.target.value})}} value={this.state.selectedDesc}/></td>\r\n                        <td><input type=\"text\" className=\"form-control\" onChange={(e) => {this.setState({selectedPrice: e.target.value})}} value={this.state.selectedPrice}/></td>\r\n                        <td>\r\n                            <input\r\n                                type=\"file\"\r\n                                accept=\"image/*\"\r\n                                ref=\"uploadImage\"\r\n                                hidden\r\n                                onChange={(e) => {this.setState({selectedImage: e.target.files[0]})}}\r\n                            />\r\n                            <input\r\n                                type=\"button\"\r\n                                value=\"Choose an image\"\r\n                                className=\"button-ku\"\r\n                                onClick={() => {this.refs.uploadImage.click()}}\r\n                            />\r\n                        </td>\r\n                        <td>\r\n                            <button onClick={() => {this.onSaveClick(value.id)}}>Save</button>\r\n                            <button onClick={() => {this.setState({selectedId: 0})}}>Cancel</button>\r\n                        </td>\r\n                    </tr>\r\n                )\r\n            }\r\n        })\r\n    }\r\n\r\n    render() {\r\n        if(this.props.role === 'administrator') {\r\n            return(\r\n                <div>\r\n                    <div className=\"container\">\r\n                        <h5 className=\"mt-3\">Add new Product</h5>\r\n                        <table className=\"table\">\r\n                            <tbody>\r\n                                <tr>\r\n                                    <td><input required type=\"text\" className=\"form-control\" onChange={(e) => {this.setState({productName: e.target.value})}} placeholder=\"Product Name\"/></td>\r\n                                    <td><input required type=\"text\" className=\"form-control\" onChange={(e) => {this.setState({productDesc: e.target.value})}} placeholder=\"Description\"/></td>\r\n                                    <td><input required type=\"text\" className=\"form-control\" onChange={(e) => {this.setState({productPrice: e.target.value})}} placeholder=\"Price\"/></td>\r\n                                    <td>\r\n                                        <input\r\n                                            type=\"file\"\r\n                                            accept=\"image/*\"\r\n                                            ref=\"uploadImage\"\r\n                                            hidden\r\n                                            onChange={(e) => {this.setState({productImage: e.target.files[0]})}}\r\n                                        />\r\n                                        <input\r\n                                            type=\"button\"\r\n                                            value=\"Choose an image\"\r\n                                            className=\"button-ku\"\r\n                                            onClick={() => {this.refs.uploadImage.click()}}\r\n                                        />\r\n                                    </td>\r\n                                    <td><button className=\"button-ku\" onClick={this.onAddClick}>Add Product</button></td>\r\n                                </tr>\r\n                            </tbody>\r\n                        </table>\r\n                        {this.notification()}\r\n\r\n                        <h5>Our Products</h5>\r\n                        <table className=\"table\">\r\n                            <thead>\r\n                                <tr>\r\n                                    <th className=\"col-2\">Product Name</th>\r\n                                    <th className=\"col-4\">Description</th>\r\n                                    <th className=\"col-2\">Price</th>\r\n                                    <th className=\"col-1\">Image</th>\r\n                                    <th className=\"col-2\">Action</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                {this.renderProduct()}\r\n                            </tbody>\r\n                        </table>\r\n\r\n                    </div>\r\n                </div>\r\n            )\r\n        } else {\r\n            return <Redirect to=\"/\"/>\r\n        }\r\n    } \r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        role: state.auth.role\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, {})(ManageProducts)"]},"metadata":{},"sourceType":"module"}