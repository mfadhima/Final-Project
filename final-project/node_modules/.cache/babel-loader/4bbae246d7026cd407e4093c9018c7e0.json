{"ast":null,"code":"var _jsxFileName = \"C:\\\\Project\\\\My-Final-Project\\\\final-project\\\\src\\\\components\\\\pages\\\\ProductDetail.jsx\";\nimport React, { Component } from 'react';\nimport Axios from 'axios';\nimport { connect } from 'react-redux';\nconst URL_API = 'http://localhost:8888/';\n\nclass ProductDetail extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      products: null,\n      message: ''\n    };\n\n    this.getProductData = () => {\n      Axios.get(URL_API + \"products/productdetail/\".concat(this.props.match.params.id)).then(res => {\n        this.setState({\n          products: res.data[0]\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.onAddToCart = () => {\n      let userId = this.props.userId;\n      let productId = this.state.products.id;\n      let productName = this.state.products.name;\n      let productDesc = this.state.products.desc;\n      let productPrice = this.state.products.price;\n      let productImage = this.state.products.image;\n      let quantity = 1;\n      Axios.get(URL_API + 'carts/checkcart', {\n        params: {\n          userId,\n          productId\n        }\n      }).then(res => {\n        if (res.data.length === 0) {\n          Axios.post(URL_API + 'carts/addtocart', {\n            productId,\n            productName,\n            productDesc,\n            productPrice,\n            productImage,\n            userId,\n            quantity\n          }).then(res2 => {\n            console.log(res2.data);\n            this.setState({\n              message: res2.data\n            });\n          }).catch(err2 => {\n            console.log(err2);\n          });\n        } else {\n          let newQuantity = res.data[0].quantity + 1;\n          Axios.put(URL_API + \"carts/addsameproduct/\".concat(res.data[0].id), {\n            quantity: newQuantity\n          }).then(res3 => {\n            console.log(res3.data);\n            this.setState({\n              message: res3.data\n            });\n          }).catch(err3 => {\n            console.log(err3);\n          });\n        }\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.notification = () => {\n      if (!this.state.message) {\n        return null;\n      } else {\n        return React.createElement(\"div\", {\n          className: \"alert-ku alert-success text-center\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88\n          },\n          __self: this\n        }, this.state.message);\n      }\n    };\n  }\n\n  componentDidMount() {\n    this.getProductData();\n  }\n\n  render() {\n    if (this.state.products) {\n      let price = this.state.products.price;\n      let image = \"http://localhost:8888/\".concat(this.state.products.image);\n      return (// <div className='card col-5 my-5 mx-auto'>\n        //     <div className='card-header mt-2'>\n        //         <h2>{this.state.products.name}</h2>\n        //     </div>\n        //     <div className='card-body'>\n        //         <img className='card-img-top' alt=\"\" src={image} />\n        //         <h3>Name: {this.state.products.name}</h3>\n        //         <p>Description : {this.state.products.desc}</p>\n        //         <p>Harga : Rp {parseInt(price).toLocaleString('IN')}</p>\n        //     </div>\n        //     <button className=\"button-ku mb-3\">Add To Cart</button>\n        // </div>\n        React.createElement(\"div\", {\n          className: \"container mt-3\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 110\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 111\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"col-6\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 112\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          className: \"card-img-top\",\n          alt: \"\",\n          src: image,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 112\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          className: \"col-6\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 113\n          },\n          __self: this\n        }, React.createElement(\"h2\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 114\n          },\n          __self: this\n        }, this.state.products.name), React.createElement(\"h5\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 115\n          },\n          __self: this\n        }, \"Description:\"), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 116\n          },\n          __self: this\n        }, this.state.products.desc), React.createElement(\"p\", {\n          style: {\n            fontWeight: \"bold\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 117\n          },\n          __self: this\n        }, \"Price : Rp \", parseInt(price).toLocaleString('IN')), React.createElement(\"button\", {\n          onClick: this.onAddToCart,\n          className: \"button-ku mb-3\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 118\n          },\n          __self: this\n        }, \"Add To Cart\"), this.notification())))\n      );\n    } else {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        className: \"text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, \"Loading\"));\n    }\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    userId: state.auth.id\n  };\n};\n\nexport default connect(mapStateToProps)(ProductDetail);","map":{"version":3,"sources":["C:\\Project\\My-Final-Project\\final-project\\src\\components\\pages\\ProductDetail.jsx"],"names":["React","Component","Axios","connect","URL_API","ProductDetail","state","products","message","getProductData","get","props","match","params","id","then","res","setState","data","catch","err","console","log","onAddToCart","userId","productId","productName","name","productDesc","desc","productPrice","price","productImage","image","quantity","length","post","res2","err2","newQuantity","put","res3","err3","notification","componentDidMount","render","fontWeight","parseInt","toLocaleString","mapStateToProps","auth"],"mappings":"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","sourcesContent":["import React, {Component} from 'react'\r\nimport Axios from 'axios'\r\nimport {connect} from 'react-redux'\r\n\r\nconst URL_API = 'http://localhost:8888/'\r\n\r\nclass ProductDetail extends Component {\r\n    state = {\r\n        products: null,\r\n        message: ''\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.getProductData()\r\n    }\r\n\r\n    getProductData = () => {\r\n        Axios.get(\r\n            URL_API + `products/productdetail/${this.props.match.params.id}`\r\n        ).then((res) => {\r\n            this.setState({products: res.data[0]})\r\n        }).catch((err) => {\r\n            console.log(err)\r\n        })\r\n    }\r\n\r\n    onAddToCart = () => {\r\n        let userId = this.props.userId\r\n        let productId = this.state.products.id\r\n        let productName = this.state.products.name\r\n        let productDesc = this.state.products.desc\r\n        let productPrice = this.state.products.price\r\n        let productImage = this.state.products.image\r\n        let quantity = 1\r\n\r\n        Axios.get(\r\n            URL_API + 'carts/checkcart',\r\n            {\r\n                params: {\r\n                    userId,\r\n                    productId\r\n                }\r\n            }\r\n        ).then((res) => {\r\n            if(res.data.length === 0) {\r\n                Axios.post(\r\n                    URL_API + 'carts/addtocart',\r\n                    {\r\n                        productId,\r\n                        productName,\r\n                        productDesc,\r\n                        productPrice,\r\n                        productImage,\r\n                        userId,\r\n                        quantity\r\n                    }\r\n                ).then((res2) => {\r\n                    console.log(res2.data)\r\n                    this.setState({message: res2.data})\r\n                }).catch((err2) => {\r\n                    console.log(err2)\r\n                })\r\n            } else {\r\n                let newQuantity = res.data[0].quantity + 1\r\n\r\n                Axios.put(\r\n                    URL_API + `carts/addsameproduct/${res.data[0].id}`,\r\n                    {\r\n                        quantity: newQuantity\r\n                    }\r\n                ).then((res3) => {\r\n                    console.log(res3.data)\r\n                    this.setState({message: res3.data})\r\n                }).catch((err3) => {\r\n                    console.log(err3)\r\n                })\r\n            }\r\n        }).catch((err) => {\r\n            console.log(err)\r\n        })\r\n    }\r\n\r\n    notification = () => {\r\n        if(!this.state.message) {\r\n            return null\r\n        } else {\r\n            return(\r\n                <div className=\"alert-ku alert-success text-center\">{this.state.message}</div>\r\n            )\r\n        }\r\n    }\r\n\r\n    render() {\r\n        if(this.state.products) {\r\n            let price = this.state.products.price\r\n            let image = `http://localhost:8888/${this.state.products.image}`\r\n            return (\r\n                // <div className='card col-5 my-5 mx-auto'>\r\n                //     <div className='card-header mt-2'>\r\n                //         <h2>{this.state.products.name}</h2>\r\n                //     </div>\r\n                //     <div className='card-body'>\r\n                //         <img className='card-img-top' alt=\"\" src={image} />\r\n                //         <h3>Name: {this.state.products.name}</h3>\r\n                //         <p>Description : {this.state.products.desc}</p>\r\n                //         <p>Harga : Rp {parseInt(price).toLocaleString('IN')}</p>\r\n                //     </div>\r\n                //     <button className=\"button-ku mb-3\">Add To Cart</button>\r\n                // </div>\r\n                <div className=\"container mt-3\">\r\n                    <div className=\"row\">\r\n                        <div className=\"col-6\"><img className='card-img-top' alt=\"\" src={image} /></div>\r\n                        <div className=\"col-6\">\r\n                            <h2>{this.state.products.name}</h2>\r\n                            <h5>Description:</h5>\r\n                            <p>{this.state.products.desc}</p>\r\n                            <p style={{fontWeight: \"bold\"}}>Price : Rp {parseInt(price).toLocaleString('IN')}</p>\r\n                            <button onClick={this.onAddToCart} className=\"button-ku mb-3\">Add To Cart</button>\r\n                            {this.notification()}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )\r\n        } else {\r\n            return <div><h1 className='text-center'>Loading</h1></div>\r\n        }\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        userId: state.auth.id\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(ProductDetail)"]},"metadata":{},"sourceType":"module"}