{"ast":null,"code":"var _jsxFileName = \"C:\\\\Project\\\\My-Final-Project\\\\final-project\\\\src\\\\components\\\\Checkout.jsx\";\nimport React, { Component } from 'react';\nimport '../styles/Cart.css';\nimport Axios from 'axios';\nconst URL_API = 'http://localhost:8888/';\n\nclass Checkout extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      message: '',\n      cartsLength: 0\n    };\n\n    this.setCartsLength = () => {\n      let carts = this.props.carts;\n      this.setState({\n        cartsLength: carts.length\n      });\n    };\n\n    this.onCompleteOrder = () => {\n      let total = 0;\n      let carts = this.props.carts;\n\n      for (let i = 0; i < carts.length; i++) {\n        total += carts[i].quantity * carts[i].productPrice;\n      }\n\n      Axios.post(URL_API + 'transactions/completetransaction', {\n        totalPrice: total,\n        userId: this.props.userId\n      }).then(res => {\n        // console.log(res.data)\n        this.setState({\n          message: res.data\n        }); // CLEAN USER'S CART\n\n        Axios.delete(URL_API + \"carts/deletefullcart/\".concat(this.props.userId)).then(res2 => {\n          console.log(res2);\n        }).catch(err2 => {\n          console.log(err2);\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.completeOrderButton = () => {\n      let carts = this.props.carts;\n      let completeButton;\n\n      if (carts.length > 0) {\n        completeButton = React.createElement(\"button\", {\n          className: \"button-ku-checkout btn-block\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 56\n          },\n          __self: this\n        }, \"Complete Order\");\n      } else {\n        completeButton = null;\n      }\n\n      return completeButton;\n    };\n\n    this.notification = () => {\n      if (!this.state.message) {\n        return null;\n      } else {\n        return React.createElement(\"div\", {\n          className: \"alert-ku alert-success text-center\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 69\n          },\n          __self: this\n        }, this.state.message);\n      }\n    };\n\n    this.renderCheckout = () => {\n      return this.props.carts.map(val => {\n        let productPrice = val.productPrice;\n        let totalPrice = val.productPrice * val.quantity;\n        return React.createElement(\"tr\", {\n          key: val.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 79\n          },\n          __self: this\n        }, React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 80\n          },\n          __self: this\n        }, val.id), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 81\n          },\n          __self: this\n        }, val.productName), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 82\n          },\n          __self: this\n        }, \"Rp \", productPrice.toLocaleString('IN')), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 83\n          },\n          __self: this\n        }, val.quantity), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 84\n          },\n          __self: this\n        }, \"Rp \", totalPrice.toLocaleString('IN')));\n      });\n    };\n\n    this.renderTotalPrice = () => {\n      let total = 0;\n      let carts = this.props.carts;\n\n      for (let i = 0; i < carts.length; i++) {\n        total += carts[i].quantity * carts[i].productPrice;\n      }\n\n      return React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        colSpan: \"4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, \"Total\"), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, \"Rp \", total.toLocaleString('IN')));\n    };\n  }\n\n  componentDidMount() {\n    this.setCartsLength();\n    console.log(this.state.cartsLength);\n  }\n\n  render() {\n    if (this.props.carts) {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        className: \"mt-5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, \"Checkout\"), React.createElement(\"table\", {\n        className: \"table text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, \"ID\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, \"Product\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, \"Price\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, \"Quantity\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, \"Total\"))), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, this.renderCheckout(), this.renderTotalPrice())), React.createElement(\"div\", {\n        onClick: this.onCompleteOrder,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, this.completeOrderButton()), this.notification()));\n    } else {\n      return null;\n    }\n  }\n\n}\n\nexport default Checkout;","map":{"version":3,"sources":["C:\\Project\\My-Final-Project\\final-project\\src\\components\\Checkout.jsx"],"names":["React","Component","Axios","URL_API","Checkout","state","message","cartsLength","setCartsLength","carts","props","setState","length","onCompleteOrder","total","i","quantity","productPrice","post","totalPrice","userId","then","res","data","delete","res2","console","log","catch","err2","err","completeOrderButton","completeButton","notification","renderCheckout","map","val","id","productName","toLocaleString","renderTotalPrice","componentDidMount","render"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAO,oBAAP;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,MAAMC,OAAO,GAAG,wBAAhB;;AAEA,MAAMC,QAAN,SAAuBH,SAAvB,CAAiC;AAAA;AAAA;AAAA,SAC7BI,KAD6B,GACrB;AACJC,MAAAA,OAAO,EAAE,EADL;AAEJC,MAAAA,WAAW,EAAE;AAFT,KADqB;;AAAA,SAW7BC,cAX6B,GAWZ,MAAM;AACnB,UAAIC,KAAK,GAAG,KAAKC,KAAL,CAAWD,KAAvB;AACA,WAAKE,QAAL,CAAc;AAACJ,QAAAA,WAAW,EAAEE,KAAK,CAACG;AAApB,OAAd;AACH,KAd4B;;AAAA,SAgB7BC,eAhB6B,GAgBX,MAAM;AACpB,UAAIC,KAAK,GAAG,CAAZ;AACA,UAAIL,KAAK,GAAG,KAAKC,KAAL,CAAWD,KAAvB;;AACA,WAAI,IAAIM,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGN,KAAK,CAACG,MAAzB,EAAiCG,CAAC,EAAlC,EAAsC;AAClCD,QAAAA,KAAK,IAAKL,KAAK,CAACM,CAAD,CAAL,CAASC,QAAT,GAAoBP,KAAK,CAACM,CAAD,CAAL,CAASE,YAAvC;AACH;;AAEDf,MAAAA,KAAK,CAACgB,IAAN,CACIf,OAAO,GAAG,kCADd,EAEI;AACIgB,QAAAA,UAAU,EAAEL,KADhB;AAEIM,QAAAA,MAAM,EAAE,KAAKV,KAAL,CAAWU;AAFvB,OAFJ,EAMEC,IANF,CAMQC,GAAD,IAAS;AACZ;AACA,aAAKX,QAAL,CAAc;AAACL,UAAAA,OAAO,EAAEgB,GAAG,CAACC;AAAd,SAAd,EAFY,CAGZ;;AACArB,QAAAA,KAAK,CAACsB,MAAN,CACIrB,OAAO,kCAA2B,KAAKO,KAAL,CAAWU,MAAtC,CADX,EAEEC,IAFF,CAEQI,IAAD,IAAU;AACbC,UAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;AACH,SAJD,EAIGG,KAJH,CAIUC,IAAD,IAAU;AACfH,UAAAA,OAAO,CAACC,GAAR,CAAYE,IAAZ;AACH,SAND;AAOH,OAjBD,EAiBGD,KAjBH,CAiBUE,GAAD,IAAS;AACdJ,QAAAA,OAAO,CAACC,GAAR,CAAYG,GAAZ;AACH,OAnBD;AAoBH,KA3C4B;;AAAA,SA6C7BC,mBA7C6B,GA6CP,MAAM;AACxB,UAAItB,KAAK,GAAG,KAAKC,KAAL,CAAWD,KAAvB;AACA,UAAIuB,cAAJ;;AACA,UAAGvB,KAAK,CAACG,MAAN,GAAe,CAAlB,EAAqB;AACjBoB,QAAAA,cAAc,GAAG;AAAQ,UAAA,SAAS,EAAC,8BAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAAjB;AACH,OAFD,MAEO;AACHA,QAAAA,cAAc,GAAG,IAAjB;AACH;;AAED,aAAOA,cAAP;AACH,KAvD4B;;AAAA,SAyD7BC,YAzD6B,GAyDd,MAAM;AACjB,UAAG,CAAC,KAAK5B,KAAL,CAAWC,OAAf,EAAwB;AACpB,eAAO,IAAP;AACH,OAFD,MAEO;AACH,eACI;AAAK,UAAA,SAAS,EAAC,oCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAqD,KAAKD,KAAL,CAAWC,OAAhE,CADJ;AAGH;AACJ,KAjE4B;;AAAA,SAmE7B4B,cAnE6B,GAmEZ,MAAM;AACnB,aAAO,KAAKxB,KAAL,CAAWD,KAAX,CAAiB0B,GAAjB,CAAsBC,GAAD,IAAS;AACjC,YAAInB,YAAY,GAAGmB,GAAG,CAACnB,YAAvB;AACA,YAAIE,UAAU,GAAGiB,GAAG,CAACnB,YAAJ,GAAmBmB,GAAG,CAACpB,QAAxC;AACA,eACI;AAAI,UAAA,GAAG,EAAEoB,GAAG,CAACC,EAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAKD,GAAG,CAACC,EAAT,CADJ,EAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAKD,GAAG,CAACE,WAAT,CAFJ,EAGI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAQrB,YAAY,CAACsB,cAAb,CAA4B,IAA5B,CAAR,CAHJ,EAII;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAKH,GAAG,CAACpB,QAAT,CAJJ,EAKI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAQG,UAAU,CAACoB,cAAX,CAA0B,IAA1B,CAAR,CALJ,CADJ;AASH,OAZM,CAAP;AAaH,KAjF4B;;AAAA,SAmF7BC,gBAnF6B,GAmFV,MAAM;AACrB,UAAI1B,KAAK,GAAG,CAAZ;AACA,UAAIL,KAAK,GAAG,KAAKC,KAAL,CAAWD,KAAvB;;AAEA,WAAI,IAAIM,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGN,KAAK,CAACG,MAAzB,EAAiCG,CAAC,EAAlC,EAAsC;AAClCD,QAAAA,KAAK,IAAKL,KAAK,CAACM,CAAD,CAAL,CAASC,QAAT,GAAoBP,KAAK,CAACM,CAAD,CAAL,CAASE,YAAvC;AACH;;AAED,aACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAI,QAAA,OAAO,EAAC,GAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADJ,EAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAAQH,KAAK,CAACyB,cAAN,CAAqB,IAArB,CAAR,CAFJ,CADJ;AAMH,KAjG4B;AAAA;;AAM7BE,EAAAA,iBAAiB,GAAG;AAChB,SAAKjC,cAAL;AACAkB,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKtB,KAAL,CAAWE,WAAvB;AACH;;AA0FDmC,EAAAA,MAAM,GAAG;AACL,QAAG,KAAKhC,KAAL,CAAWD,KAAd,EAAqB;AACjB,aACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAK,QAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAI,QAAA,SAAS,EAAC,MAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,EAEI;AAAO,QAAA,SAAS,EAAC,mBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,EAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAFJ,EAGI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAHJ,EAII;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAJJ,EAKI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBALJ,CADJ,CADJ,EAUI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACK,KAAKyB,cAAL,EADL,EAEK,KAAKM,gBAAL,EAFL,CAVJ,CAFJ,EAiBI;AAAK,QAAA,OAAO,EAAE,KAAK3B,eAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAqC,KAAKkB,mBAAL,EAArC,CAjBJ,EAkBK,KAAKE,YAAL,EAlBL,CADJ,CADJ;AAwBH,KAzBD,MAyBO;AACH,aAAO,IAAP;AACH;AACJ;;AAhI4B;;AAmIjC,eAAe7B,QAAf","sourcesContent":["import React, { Component } from 'react'\r\nimport '../styles/Cart.css'\r\nimport Axios from 'axios'\r\n\r\nconst URL_API = 'http://localhost:8888/'\r\n\r\nclass Checkout extends Component {\r\n    state = {\r\n        message: '',\r\n        cartsLength: 0\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.setCartsLength()\r\n        console.log(this.state.cartsLength)\r\n    }\r\n\r\n    setCartsLength = () => {\r\n        let carts = this.props.carts\r\n        this.setState({cartsLength: carts.length})\r\n    }\r\n\r\n    onCompleteOrder = () => {\r\n        let total = 0\r\n        let carts = this.props.carts\r\n        for(let i = 0; i < carts.length; i++) {\r\n            total += (carts[i].quantity * carts[i].productPrice)\r\n        }\r\n\r\n        Axios.post(\r\n            URL_API + 'transactions/completetransaction',\r\n            {\r\n                totalPrice: total,\r\n                userId: this.props.userId\r\n            }\r\n        ).then((res) => {\r\n            // console.log(res.data)\r\n            this.setState({message: res.data})\r\n            // CLEAN USER'S CART\r\n            Axios.delete(\r\n                URL_API + `carts/deletefullcart/${this.props.userId}`\r\n            ).then((res2) => {\r\n                console.log(res2)\r\n            }).catch((err2) => {\r\n                console.log(err2)\r\n            })\r\n        }).catch((err) => {\r\n            console.log(err)\r\n        })\r\n    }\r\n\r\n    completeOrderButton = () => {\r\n        let carts = this.props.carts\r\n        let completeButton\r\n        if(carts.length > 0) {\r\n            completeButton = <button className=\"button-ku-checkout btn-block\">Complete Order</button>\r\n        } else {\r\n            completeButton = null\r\n        }\r\n\r\n        return completeButton\r\n    }\r\n\r\n    notification = () => {\r\n        if(!this.state.message) {\r\n            return null\r\n        } else {\r\n            return(\r\n                <div className=\"alert-ku alert-success text-center\">{this.state.message}</div>\r\n            )\r\n        }\r\n    }\r\n\r\n    renderCheckout = () => {\r\n        return this.props.carts.map((val) => {\r\n            let productPrice = val.productPrice\r\n            let totalPrice = val.productPrice * val.quantity\r\n            return(\r\n                <tr key={val.id}>\r\n                    <td>{val.id}</td>\r\n                    <td>{val.productName}</td>\r\n                    <td>Rp {productPrice.toLocaleString('IN')}</td>\r\n                    <td>{val.quantity}</td>\r\n                    <td>Rp {totalPrice.toLocaleString('IN')}</td>\r\n                </tr>\r\n            )\r\n        })\r\n    }\r\n\r\n    renderTotalPrice = () => {\r\n        let total = 0\r\n        let carts = this.props.carts\r\n\r\n        for(let i = 0; i < carts.length; i++) {\r\n            total += (carts[i].quantity * carts[i].productPrice)\r\n        }\r\n\r\n        return(\r\n            <tr>\r\n                <th colSpan=\"4\">Total</th>\r\n                <td>Rp {total.toLocaleString('IN')}</td>\r\n            </tr>\r\n        )\r\n    }\r\n\r\n    render() {\r\n        if(this.props.carts) {\r\n            return (\r\n                <div>\r\n                    <div className=\"container\">\r\n                        <h4 className=\"mt-5\">Checkout</h4>\r\n                        <table className=\"table text-center\">\r\n                            <thead>\r\n                                <tr>\r\n                                    <th>ID</th>\r\n                                    <th>Product</th>\r\n                                    <th>Price</th>\r\n                                    <th>Quantity</th>\r\n                                    <th>Total</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                {this.renderCheckout()}\r\n                                {this.renderTotalPrice()}\r\n                            </tbody>\r\n                        </table>\r\n                        <div onClick={this.onCompleteOrder}>{this.completeOrderButton()}</div>\r\n                        {this.notification()}\r\n                    </div>\r\n                </div>\r\n            )\r\n        } else {\r\n            return null\r\n        }\r\n    }\r\n}\r\n\r\nexport default Checkout"]},"metadata":{},"sourceType":"module"}